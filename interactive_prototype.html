<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PreCharge Pro</title>
<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#0b1120;
    color:white;
    display:flex;
    justify-content:center;
}
.container{
    width:100%;
    max-width:420px;
    padding:20px;
}
.header{text-align:center;margin-bottom:20px;}
.header h1{margin:0;font-size:24px;}
.tagline{font-size:13px;color:#94a3b8;}

.card{
    background:#1e293b;
    padding:18px;
    border-radius:20px;
    margin-bottom:20px;
    box-shadow:0 0 15px rgba(124,58,237,0.2);
}
select,input[type=number]{
    width:100%;
    padding:10px;
    margin-top:8px;
    margin-bottom:12px;
    border-radius:10px;
    border:none;
}
input[type=range]{width:100%;}
button{
    width:100%;
    padding:14px;
    border:none;
    border-radius:14px;
    background:#7c3aed;
    color:white;
    font-size:16px;
    cursor:pointer;
}
.progress-wrapper{
    display:flex;
    justify-content:center;
    margin-bottom:15px;
}
.progress-circle{
    width:140px;height:140px;border-radius:50%;
    background:conic-gradient(#22d3ee 0deg,#334155 0deg);
    display:flex;align-items:center;justify-content:center;
    font-size:28px;font-weight:bold;
}
.result{margin-top:15px;line-height:1.6;}
.highlight{
    margin-top:10px;
    font-size:18px;
    font-weight:bold;
    color:#22d3ee;
}
.topup-grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:10px;
    margin-top:15px;
}
.topup-btn{
    padding:10px;
    border-radius:10px;
    background:#334155;
    text-align:center;
    cursor:pointer;
}
.topup-btn.recommended{
    background:#22d3ee;
    color:#0b1120;
    font-weight:bold;
}
.success{
    margin-top:10px;
    color:#4ade80;
    font-weight:bold;
}
</style>
</head>
<body>

<div class="container">
<div class="header">
<h1>PreCharge Pro</h1>
<div class="tagline">Predict Before You Plug.</div>
</div>

<div class="card">
<div class="progress-wrapper">
<div class="progress-circle" id="progressCircle">20%</div>
</div>

<label>Vehicle Model</label>
<select id="carModel"></select>

<label>Current Battery (%)</label>
<input type="number" id="current" value="20">

<label>Target Battery (%)</label>
<input type="range" id="targetSlider" min="10" max="100" value="80">
<div id="targetValue">Target: 80%</div>

<label>Charger Type</label>
<select id="charger">
<option value="7">AC 7 kW</option>
<option value="60">DC 60 kW</option>
<option value="120">DC 120 kW</option>
</select>

<label>Rate (Baht/kWh)</label>
<input type="number" id="rate" value="7.5">

<button onclick="calculate()">Calculate</button>

<div class="result" id="result"></div>

<div class="topup-grid" id="topupGrid"></div>
<div id="topupMessage"></div>

</div>
</div>

<script>
const cars = [
{name:"BYD Atto 3 Extended",battery:60.48},
{name:"MG4 64kWh",battery:64},
{name:"Tesla Model 3 RWD",battery:57.5},
{name:"NETA V-II",battery:38.5}
];

const topUpOptions=[100,200,300,500,1000,2000];

const carSelect=document.getElementById("carModel");
cars.forEach(car=>{
let option=document.createElement("option");
option.value=car.battery;
option.text=car.name+" ("+car.battery+" kWh)";
carSelect.add(option);
});

const slider=document.getElementById("targetSlider");
const targetValue=document.getElementById("targetValue");
const progressCircle=document.getElementById("progressCircle");

slider.oninput=function(){
targetValue.innerText="Target: "+this.value+"%";
};

function updateCircle(percent){
let degrees=percent*3.6;
progressCircle.style.background=
"conic-gradient(#22d3ee "+degrees+"deg,#334155 "+degrees+"deg)";
progressCircle.innerText=percent+"%";
}

function calculate(){
let battery=parseFloat(carSelect.value);
let current=parseFloat(document.getElementById("current").value);
let target=parseFloat(slider.value);
let chargerPower=parseFloat(document.getElementById("charger").value);
let rate=parseFloat(document.getElementById("rate").value);

if(target<=current){
document.getElementById("result").innerHTML="‚ö† Target must be higher than current.";
return;
}

let efficiency=0.9;
let percent=(target-current)/100;
let energyNeeded=battery*percent;
let meterEnergy=energyNeeded/efficiency;
let cost=meterEnergy*rate;
let timeMinutes=(meterEnergy/chargerPower)*60;
let distance=energyNeeded*6;

let recommended=topUpOptions.find(amount=>amount>=cost);
if(!recommended){recommended=2000;}

let difference=recommended-cost;

updateCircle(target);

document.getElementById("result").innerHTML=
"üîã Energy: "+meterEnergy.toFixed(2)+" kWh<br>"+
"‚è± Time: "+timeMinutes.toFixed(0)+" minutes<br>"+
"üöó Range: "+distance.toFixed(0)+" km<br>"+
"üí∞ Cost: "+cost.toFixed(2)+" Baht<br>"+
"<div class='highlight'>Recommended Top-Up: "+recommended+" Baht</div>"+
"Remaining After Charge: "+difference.toFixed(2)+" Baht";

renderTopUps(recommended);
}

function renderTopUps(recommended){
const grid=document.getElementById("topupGrid");
grid.innerHTML="";
topUpOptions.forEach(amount=>{
let div=document.createElement("div");
div.className="topup-btn";
if(amount===recommended){
div.classList.add("recommended");
}
div.innerText=amount+" Baht";
div.onclick=function(){
document.getElementById("topupMessage").innerHTML=
"<div class='success'>Top-Up "+amount+" Baht Successful (Simulation)</div>";
};
grid.appendChild(div);
});
}

updateCircle(20);
</script>

</body>
</html>